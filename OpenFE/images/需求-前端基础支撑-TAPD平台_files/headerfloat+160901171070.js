TFL.widget("HeaderFloat",{options:{},refresh:function(){},init:function(e){var t=this;e.hasOwnProperty("ajax_table")&&e.ajax_table?t.ajax_table_header_fixed():t.table_header_fixed()},table_header_fixed:function(){var e=this,t=$("[table-headerfixed]");if(!(t.size()<1)&&1==t.size()){var i=t.attr("id")+"_fixed";e.append_fixed_header_table(t,i),e.fix_click_bug_for_ie(t,i),e.fixed_header_scroll(t,i),$(window).on("scroll",t,function(){e.fixed_header_scroll(t,i)}),$(window).resize(function(){$("#"+i).css("width",t.find("thead").width()),e.fixed_header_scroll(t,i)}),e.refresh=function(){$("#"+i).css("width",t.find("thead").width()),e.fixed_header_scroll(t,i)}}},ajax_table_header_fixed:function(){var e=this,t=$("[ajax-table-headerfixed]");if(!(t.size()<1)){if(1==t.size()){var i=t.attr("id")+"_fixed";e.append_fixed_header_table(t,i),e.fix_click_bug_for_ie(t,i),e.fixed_header_scroll(t,i),$(window).on("scroll."+i,t,function(){e.fixed_header_scroll(t,i)}),$(window).resize(function(){$("#"+i).css("width",t.find("thead").width()),e.fixed_header_scroll(t,i)}),e.refresh=function(){$("#"+i).css("width",t.find("thead").width()),e.fixed_header_scroll(t,i)}}t.size()>1&&t.each(function(i){if(1!=t.eq(i).attr("header_fixed_init")){var d=t.eq(i).attr("id")+"_fixed";e.append_fixed_header_table(t.eq(i),d),e.fix_click_bug_for_ie(t.eq(i),d),e.fixed_header_scroll(t.eq(i),d),$(window).on("scroll."+d,t.eq(i),function(){e.fixed_header_scroll(t.eq(i),d)}),$(window).resize(function(){$("#"+d).css("width",t.eq(i).find("thead").width())})}}),$(document).off("click.off").on("click.off","#g_tab",function(){t.each(function(i){t.eq(i).is(":visible")?$(window).off("scroll."+t.eq(i).attr("id")+"_fixed").on("scroll."+t.eq(i).attr("id")+"_fixed",t.eq(i),function(){e.fixed_header_scroll(t.eq(i),t.eq(i).attr("id")+"_fixed")}):$(window).off("scroll."+t.eq(i).attr("id")+"_fixed")})}),$(document).off("click.show").on("click.show","#show_story_b",function(){t.each(function(e){t.eq(e).find("#stories-fold-all-toggle").is(":hidden")?$("#"+t.eq(e).attr("id")+"_fixed").find("#stories-fold-all-toggle").attr("style","display:none"):$("#"+t.eq(e).attr("id")+"_fixed").find("#stories-fold-all-toggle").attr("style","display:;")})})}},get_table_pos_top:function(e){var t=document.body.scrollTop|document.documentElement.scrollTop;return e.offset().top-t},get_table_pos_left:function(e){var t=document.body.scrollLeft|document.documentElement.scrollLeft;return e.offset().left-t},append_fixed_header_table:function(e,t){var i=$(".topnav2").height()||$("#hd").height();if($(".top-alert").length>0&&(i+=$(".top-alert").outerHeight()),0>=$("#"+t).size()){if(enableHebe){var d=0-document.body.scrollTop;e.after('<table id="'+t+'" class="tfl-table g_table tfl-editable" style="left: 0;display:none; top:'+d+'px !important; box-shadow: 2px 2px 4px rgba(0,0,0,0.1); -moz-box-shadow: 2px 2px 4px rgba(0,0,0,0.1); -webkit-box-shadow: 2px 2px 4px rgba(0,0,0,0.1); position: absolute" ></table>')}else e.after('<table id="'+t+'" class="g_table tfl-editable" style="display:none; top:'+i+'px !important; box-shadow: 2px 2px 4px rgba(0,0,0,0.1); -moz-box-shadow: 2px 2px 4px rgba(0,0,0,0.1); -webkit-box-shadow: 2px 2px 4px rgba(0,0,0,0.1); position: fixed"></table>');$("#"+t).prepend(e.find("thead").clone()),e.attr("header_fixed_init","1")}},adjust_fixed_header_top:function(e){if($(".topnav2").size()>0||$("#hd").size()>0)var t=$(".topnav2").height()||$("#hd").height();else var t=0;$(".top-alert").length>0&&(t+=$(".top-alert").outerHeight()),0<$("#"+e).size()&&$("#"+e).css("top",t)},show_fixed_header:function(e,t){e.find("thead").find("th").each(function(e){$("#"+t+" thead").find("th").eq(e).width($(this).width())}),$("[fixed-header-full]").length>0&&($("#"+t).css("left",0),$("#"+t).find(".flag_area").width($("#"+t).find(".flag_area").width()+60)),$("#"+t).css("width",e.find("thead").width()).show()},hide_fixed_header:function(e){$("#"+e).hide()},adjust_fixed_header:function(e,t){var i=this;$("[fixed-header-full]").length>0?($("#"+t).css("left",i.get_table_pos_left(e)-60),$(document).bind("leftTreeOpen",function(d){var o=$("#"+t).width()-200;$("#"+t).css({width:o+"px",left:i.get_table_pos_left(e)-60})}),$(document).bind("leftTreeClose",function(d){$("#"+t).css({width:"100%",left:i.get_table_pos_left(e)-60})})):(enableHebe||$("#"+t).css("left",i.get_table_pos_left(e)),$(document).bind("leftTreeOpen",function(d){var o=$("#"+t).width()-200;$("#"+t).css({width:o+"px",left:i.get_table_pos_left(e)})}),$(document).bind("leftTreeClose",function(d){$("#"+t).css({width:"100%",left:i.get_table_pos_left(e)})}));var d=document.documentElement.clientWidth;$("#"+t).width()<d&&$("#"+t).find("th:last").width($("#"+t).find("th:last").width()+d-$("#"+t).width())},fixed_header_scroll:function(e,t){var i=$(".top-alert").length>0?90:60,d=this;d.get_table_pos_top(e)<i?d.show_fixed_header(e,t):d.hide_fixed_header(t),d.adjust_fixed_header(e,t)},fix_click_bug_for_ie:function(e,t){var i=this,d=$("#"+e.attr("id")+"_fixed").find("i").attr("id");$(document).off("click.ie").on("click.ie","#"+d,function(){i.fixed_header_scroll(e,t)})}});