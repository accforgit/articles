!function(t,r){function a(t,r){for(var a=decodeURI(t),e=u[r?"strict":"loose"].exec(a),n={attr:{},param:{},seg:{}},i=14;i--;)n.attr[s[i]]=e[i]||"";return n.param.query={},n.param.fragment={},n.attr.query.replace(f,function(t,r,a){if(r){var e=r.split("[]");2==e.length&&""===e[1]?("undefined"==typeof n.param.query[r]&&(n.param.query[r]=[]),n.param.query[r].push(a)):r&&(n.param.query[r]=a)}}),n.attr.fragment.replace(p,function(t,r,a){r&&(n.param.fragment[r]=a)}),n.seg.path=n.attr.path.replace(/^\/+|\/+$/g,"").split("/"),n.seg.fragment=n.attr.fragment.replace(/^\/+|\/+$/g,"").split("/"),n.attr.base=n.attr.host?n.attr.protocol+"://"+n.attr.host+(n.attr.port?":"+n.attr.port:""):"",n}function e(t){var a=t.tagName;return a!==r?n[a.toLowerCase()]:a}var n={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href"},s=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],i={anchor:"fragment"},u={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},f=/(?:^|&|;)([^&=;]*)=?([^&;]*)/g,p=/(?:^|&|;)([^&=;]*)=?([^&;]*)/g;t.fn.url=function(r){var a="";return this.length&&(a=t(this).attr(e(this[0]))||""),t.url(a,r)},t.url=function(t,e){return 1===arguments.length&&t===!0&&(e=!0,t=r),e=e||!1,t=t||window.location.toString(),{data:a(t,e),attr:function(t){return t=i[t]||t,t!==r?this.data.attr[t]:this.data.attr},param:function(t){return t!==r?this.data.param.query[t]:this.data.param.query},fparam:function(t){return t!==r?this.data.param.fragment[t]:this.data.param.fragment},segment:function(t){return t===r?this.data.seg.path:(t=0>t?this.data.seg.path.length+t:t-1,this.data.seg.path[t])},fsegment:function(t){return t===r?this.data.seg.fragment:(t=0>t?this.data.seg.fragment.length+t:t-1,this.data.seg.fragment[t])}}},t.url.setUrl=function(r,a){var e=t.extend({},t.url(r).data.param.query,a),n="";for(k in e)if(null!=e[k])if(t.isArray(e[k]))for(o in e[k])n+="&"+k+"="+e[k][o];else n+="&"+k+"="+e[k];return n="?"+n.slice(1),{search:n,url:t.url(r).data.attr.base+t.url(r).data.attr.path+n,attr:t.url(r).data.attr}}}(jQuery);