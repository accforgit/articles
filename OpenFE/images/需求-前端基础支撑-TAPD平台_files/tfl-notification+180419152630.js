!function(){function i(i,t){var o;return a.Notification?o=new a.Notification(i,{icon:w(t.icon)?t.icon:t.icon.x32,body:t.body||m,tag:t.tag||m}):a.webkitNotifications?(o=a.webkitNotifications.createNotification(t.icon,i,t.body),o.show()):navigator.mozNotification?(o=navigator.mozNotification.createNotification(i,t.body,t.icon),o.show()):a.external&&a.external.msIsSiteMode()&&(a.external.msSiteModeClearIconOverlay(),a.external.msSiteModeSetIconOverlay(w(t.icon)?t.icon:t.icon.x16,i),a.external.msSiteModeActivate(),o={ieVerification:S+1}),o}function t(i){return{close:function(){i&&(i.close?i.close():i.cancel?i.cancel():a.external&&a.external.msIsSiteMode()&&i.ieVerification===S&&a.external.msSiteModeClearIconOverlay())}}}function o(i){if(v){var t=b(i)?i:M;a.webkitNotifications&&a.webkitNotifications.checkPermission?a.webkitNotifications.requestPermission(t):a.Notification&&a.Notification.requestPermission&&a.Notification.requestPermission(t)}}function n(){var i;if(v)return a.Notification&&a.Notification.permissionLevel?i=a.Notification.permissionLevel():a.webkitNotifications&&a.webkitNotifications.checkPermission?i=d[a.webkitNotifications.checkPermission()]:a.Notification&&a.Notification.permission?i=a.Notification.permission:navigator.mozNotification?i=f:a.external&&void 0!==a.external.msIsSiteMode()&&(i=a.external.msIsSiteMode()?f:s),i}function e(i){return i&&x(i)&&I(k,i),k}function c(){return k.pageVisibility?document.hidden||document.msHidden||document.mozHidden||document.webkitHidden:!0}function r(o,e){var r,s;return v&&c()&&w(o)&&e&&(w(e.icon)||x(e.icon))&&n()===f&&(r=i(o,e)),s=t(r),k.autoClose&&r&&!r.ieVerification&&r.addEventListener&&r.addEventListener("show",function(){var i=s;a.setTimeout(function(){i.close()},k.autoClose)}),s}var a=window,s="default",f="granted",u="denied",d=[f,s,u],l={pageVisibility:!1,autoClose:0},N={},m="",v=function(){var i=!1;try{i=!!(a.Notification||a.webkitNotifications||navigator.mozNotification||a.external&&void 0!==a.external.msIsSiteMode())}catch(t){}return i}(),S=Math.floor(10*Math.random()+1),b=function(i){return i&&i.constructor===Function},w=function(i){return i&&i.constructor===String},x=function(i){return i&&i.constructor===Object},I=function(i,t){var o,n;for(o in t)n=t[o],o in i&&(i[o]===n||o in N&&N[o]===n)||(i[o]=n);return i},M=function(){},k=l;TFL.widget("Notification",{PERMISSION_DEFAULT:s,PERMISSION_GRANTED:f,PERMISSION_DENIED:u,isSupported:v,config:e,createNotification:r,permissionLevel:n,requestPermission:o})}();