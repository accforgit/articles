!function(t){t.cluetip={version:"1.2.5",template:["<div>",'<div class="cluetip-outer">','<h3 class="cluetip-title"></h3>','<div class="cluetip-inner"></div>',"</div>",'<div class="cluetip-extra"></div>','<div class="cluetip-arrows cluetip-arrows-border"></div>','<div class="cluetip-arrows"></div>',"</div>"].join(""),setup:{insertionType:"appendTo",insertionElement:"body"},defaults:{multiple:!1,width:200,height:"auto",cluezIndex:1101,positionBy:"auto",position:"right",topOffset:15,leftOffset:15,local:!1,localPrefix:null,localIdSuffix:null,hideLocal:!0,attribute:"rel",titleAttribute:"title",splitTitle:"",clean:!1,showTitle:!0,cluetipClass:"jtip",hoverClass:"",waitImage:!0,arrows:!0,dropShadow:!1,dropShadowSteps:6,sticky:!1,mouseOutClose:!1,activation:"hover",clickThrough:!0,tracking:!1,delayedClose:0,closePosition:"title",closeText:"Ã—",truncate:0,locateObject:null,theme:"default",maxWidth:2e3,minWidth:0,maxHeight:2e3,minHeight:0,fx:{open:"show",openSpeed:""},hoverIntent:{sensitivity:3,interval:50,timeout:0},onActivate:function(t){return!0},onShow:function(t,e){},onHide:function(t,e){},ajaxCache:!0,ajaxProcess:function(t){return t=t.replace(/<(script|style|title)[^<]+<\/(script|style|title)>/gm,"").replace(/<(link|meta)[^>]+>/g,"")},ajaxSettings:{dataType:"html"},debug:!1}};var e,i="cluetip ",o={},l=0,a=0;t.fn.attrProp=t.fn.attr||t.fn.prop,t.fn.cluetip=function(n,s){function c(e,i,o){var l="",a=i.dropShadow&&i.dropShadowSteps?+i.dropShadowSteps:0;if(t.support.boxShadow){a&&(l="1px 1px "+a+"px rgba(0,0,0,0.5)");return e.css(t.support.boxShadow,l),!1}var n=e.find(".cluetip-drop-shadow");if(a==n.length)return n;n.remove();for(var s=[],c=0;a>c;)s[c++]='<div style="top:'+c+"px;left:"+c+'px;"></div>';return o=t(s.join("")).css({position:"absolute",backgroundColor:"#000",zIndex:v-1,opacity:.1}).addClass("cluetip-drop-shadow").prependTo(e)}var r,p,d,u,h,f;if("object"==typeof n&&(s=n,n=null),"destroy"==n){var m=this.data("cluetip");if(m)return t(m.selector).remove(),t.removeData(this,"title"),t.removeData(this,"cluetip"),t(document).unbind(".cluetip"),this.unbind(".cluetip")}s=t.extend(!0,{},t.cluetip.defaults,s||{}),l++;var v,g=t.cluetip.backCompat||!s.multiple?"cluetip":"cluetip-"+l,x="#"+g,b=t.cluetip.backCompat?"#":".",w=t.cluetip.setup.insertionType,I=t.cluetip.setup.insertionElement||"body";w=/appendTo|prependTo|insertBefore|insertAfter/.test(w)?w:"appendTo",r=t(x),r.length||(r=t(t.cluetip.template)[w](I).attr("id",g).css({position:"absolute",display:"none"}),v=+s.cluezIndex,d=r.find(b+"cluetip-outer").css({position:"relative",zIndex:v}),p=r.find(b+"cluetip-inner"),u=r.find(b+"cluetip-title")),e=t("#cluetip-waitimage"),e.length||(e=t("<div></div>").attr("id","cluetip-waitimage").css({position:"absolute"})),e.insertBefore(r).hide();var W=(parseInt(r.css("paddingLeft"),10)||10)+(parseInt(r.css("paddingRight"),10)||10);return this.each(function(l){function m(){return!1}function g(t,e){var i=t.status;e.beforeSend(t.xhr,e),"error"==i?e[i](t.xhr,t.textStatus):"success"==i&&e[i](t.data,t.textStatus,t.xhr),e.complete(t.xhr,e.textStatus)}var w=this,I=t(this),T=t.extend(!0,{},s,t.metadata?I.metadata():t.meta?I.data():I.data("cluetip")||{}),k=!1,y=!1,S=0,C=null,j=null,P=T[T.attribute]||("href"==T.attribute?I.attr(T.attribute):I.attrProp(T.attribute)||I.attr(T.attribute)),z=T.cluetipClass;if(v=+T.cluezIndex,I.data("cluetip",{title:w.title,zIndex:v,selector:x}),!P&&!T.splitTitle&&!n)return!0;T.local&&T.localPrefix&&(P=T.localPrefix+P),T.local&&T.hideLocal&&P&&t(P+":first").hide();var O,B,H,A,L,M,X,E,N,Y,D,R,$=parseInt(T.topOffset,10),_=parseInt(T.leftOffset,10),q=isNaN(parseInt(T.height,10))?"auto":/\D/g.test(T.height)?T.height:T.height+"px",F=function(e,i){tipInnerWidth=parseInt(e.width,10)||275;var o=i.attrProp(e.titleAttribute);if(e.clean?o=TFL.htmlspecialchars_encode(o):o&&-1!=o.indexOf("<script>")&&(o=htmlspecialchars_encode(o)),"auto"==e.width){var l=t("<div>").html(o).css({fontSize:"12px",position:"absolute",maxWidth:parseInt(e.maxWidth),minWidth:parseInt(e.minWidth)}).appendTo("body");tipInnerWidth=l.outerWidth(),l.remove()}tipWidth=tipInnerWidth+W,linkWidth=i[0].offsetWidth,linkHeight=i[0].offsetHeight,!linkWidth&&i[0].getBBox&&(linkWidth=i[0].getBBox().width,linkHeight=i[0].getBBox().height),tipParts=[],tipTitle="title"!=e.attribute?o||"":"",e.splitTitle&&(tipParts=tipTitle.split(e.splitTitle),tipTitle=e.showTitle||""===tipParts[0]?tipParts.shift():"")},Q=function(i){var c,f,m=T.onActivate(I);if(m===!1)return!1;y=!0;var v=T.locateObject?T.locateObject:I;F(T,v),r=t(x).css({position:"absolute"}),d=r.find(b+"cluetip-outer"),p=r.find(b+"cluetip-inner"),u=r.find(b+"cluetip-title"),h=r.find(b+"cluetip-arrows"),r.removeClass().css({width:parseInt(T.width,10)||"auto"}),T.hoverClass&&I.addClass(T.hoverClass),A=L=I.offset().top,N=I.offset().left,i.type==focus?(D=N+linkWidth/2+_,X=L+$):(D=i.pageX,X=i.pageY);var W=w.tagName.toLowerCase();if("area"!=W&&(H=t(document).scrollTop(),R=t(window).width()),r.removeAttr("doc-click-hide"),T.locateObject&&(A=L=T.locateObject.offset().top,N=T.locateObject.offset().left,linkWidth=T.locateObject.width(),r.attr("doc-click-hide",!0)),"fixed"==T.positionBy||T.locateObject?(Y=linkWidth+N+_,("input"==W||T.locateObject||"textarea"==W||"select"==W)&&(Y+=5,L+=2)):"bottomTop"==T.positionBy?Y=N+linkWidth/2-tipWidth/2+_>R?R-tipWidth/2-_:Math.max(N+linkWidth/2-tipWidth/2+_,0):("area"==W||"mouse"==T.positionBy||linkWidth+tipWidth>R?D+20+tipWidth>R?(r.addClass("cluetip-"+z),Y=D-tipWidth-_>=0?D-tipWidth-_-parseInt(r.css("marginLeft"),10)+parseInt(p.css("marginRight"),10):D-tipWidth/2):Y=D+_:N+linkWidth+tipWidth+_>R&&N>tipWidth||"left"==T.position?(Y=N-tipWidth,T.position="left"):(Y=linkWidth+N+_,T.position="right"),c=0>Y?i.pageY+$:i.pageY,0>Y&&(Y=D+tipWidth/2>R?R/2-tipWidth/2:Math.max(D-tipWidth/2,0))),r.css({left:Y,zIndex:I.data("cluetip").zIndex}),d.css({maxWidth:parseInt(T.maxWidth),minWidth:parseInt(T.minWidth),maxHeight:parseInt(T.maxHeight),minHeight:parseInt(T.minHeight)}),B=t(window).height(),n)"function"==typeof n&&(n=n.call(w)),p.html(n),U(c);else if(tipParts.length){var S=tipParts.length;if(S?p.html(tipParts[0]):p.html(""),S>1)for(var C=1;S>C;C++)p.append('<div class="split-body">'+tipParts[C]+"</div>");U(c)}else if(T.local||"undefined"==typeof P||0===P.indexOf("#")){if(T.local){var j=t(P+(/^#\S+$/.test(P)?"":":eq("+l+")")).clone(!0).show();T.localIdSuffix&&j.attr("id",j[0].id+T.localIdSuffix),p.html(j),U(c)}}else if(/\.(jpe?g|tiff?|gif|png)(?:\?.*)?$/i.test(P))p.html('<img src="'+P+'" alt="'+tipTitle+'" />'),U(c);else{var O=T.ajaxSettings.beforeSend,M=T.ajaxSettings.error,E=T.ajaxSettings.success,q=T.ajaxSettings.complete,Q={cache:T.ajaxCache,url:P,beforeSend:function(t,i){O&&O.call(w,t,r,p,i),d.children().empty(),T.waitImage&&e.css({top:X+20,left:D+20,zIndex:I.data("cluetip").zIndex-1}).show()},error:function(t,e){s.ajaxCache&&!o[P]&&(o[P]={status:"error",textStatus:e,xhr:t}),y&&(M?M.call(w,t,e,r,p):p.html("<i>sorry, the contents could not be loaded</i>"))},success:function(t,e,i){s.ajaxCache&&!o[P]&&(o[P]={status:"success",data:t,textStatus:e,xhr:i}),k=T.ajaxProcess.call(w,t),"object"==typeof k&&null!==k&&(tipTitle=k.title,k=k.content),y&&(E&&E.call(w,t,e,r,p),p.html(k))},complete:function(i,o){q&&q.call(w,i,o,r,p);var l=p[0].getElementsByTagName("img");a=l.length;for(var n=0,s=l.length;s>n;n++)l[n].complete&&a--;a&&!t.browser.opera?t(l).bind("load.ct error.ct",function(){a--,0===a&&(e.hide(),t(l).unbind(".ct"),y&&U(c))}):(e.hide(),y&&U(c))}};f=t.extend(!0,{},T.ajaxSettings,Q),o[P]?g(o[P],f):t.ajax(f)}},U=function(e){t("#cluetip .cluetip-title").html("");var o,l,a,n=tipTitle||T.showTitle&&"&nbsp;",s="",m="";if(r.addClass("cluetip-"+z),T.truncate){var v=p.text().slice(0,T.truncate)+"...";p.html(v)}n?(u.show(),"&nbsp;"!=n&&u.html("<span class='cluetip-title-text'>"+n+"</span>")):u.hide(),T.sticky&&(o=t('<div class="cluetip-close"><a href="javascript:;">'+T.closeText+"</a></div>"),"bottom"==T.closePosition?o.appendTo(p):"title"==T.closePosition?o.prependTo(u):o.prependTo(p),o.bind("click.cluetip",function(){return J(),!1}),T.mouseOutClose?r.bind("mouseenter.cluetip",function(){clearTimeout(j)}).bind("mouseleave.cluetip",function(){C=setTimeout(function(){J()},500)}):r.unbind("mouseleave.cluetip")),d.css({zIndex:I.data("cluetip").zIndex,overflow:"auto"==q?"visible":"auto",height:q}),O="auto"==q?Math.max(r.outerHeight(),r.height()):parseInt(q,10),E=H+B,"fixed"==T.positionBy||T.locateObject?M=L+linkHeight/2-O/2:D>Y&&Math.max(Y,0)+tipWidth>D||"bottomTop"==T.positionBy?(Y=N+linkWidth/2-tipWidth/2,"top"==T.position||L+O+$>E&&X-H>O+$?(M=A?A-O-$:X-O-$,m="top"):(M=A&&linkHeight?A+linkHeight+$:X+$,m="bottom")):L+O+$>E?M=O>=B?H:E-O-$:"mouse"==T.positionBy?M=e-$:(a=L+linkHeight/2-O/2,0>a?a=0:a>E&&(a=L),M=a),""===m&&(m=T.position?T.position:N>Y?"left":"right"),l=" clue-"+m+"-"+z+" cluetip-"+z,"rounded"==z&&(l+=" ui-corner-all"),T.theme&&(l+=" "+T.theme),r.css({top:M+"px",left:Y+"px"}).attrProp({"class":i+l}),T.arrows?(h.removeAttr("style"),h.css({zIndex:I.data("cluetip").zIndex+1}),/(left|right)/.test(m)?(s=O/2-5,h.css({top:s})):(bgX=tipWidth/2-5,h.css({left:bgX}))):h.hide(),f=c(r,T),f&&f.length&&f.hide().css({height:O,width:tipInnerWidth,zIndex:I.data("cluetip").zIndex-1}).show(),r.hide()[T.fx.open](T.fx.openSpeed||0),t.fn.bgiframe&&r.bgiframe(),T.delayedClose>0&&(S=setTimeout(J,T.delayedClose)),T.onShow.call(w,r,p)},G=function(t){y=!1,e.hide(),J(),clearTimeout(S),T.hoverClass&&I.removeClass(T.hoverClass)},J=function(e){var i=e&&e.data("cluetip")?e:I,o=i.data("cluetip")&&i.data("cluetip").selector,l=o||"div.cluetip",a=t(l),n=a.find(b+"cluetip-inner");a.find(b+"cluetip-arrows");a.hide().removeClass(),T.onHide.call(i[0],a,n),o&&i.removeClass("cluetip-clicked"),o&&tipTitle&&i.attrProp(T.titleAttribute,tipTitle)};if(t(document).unbind("hideCluetip.cluetip").bind("hideCluetip.cluetip",function(e){J(t(e.target))}),/click|toggle/.test(T.activation))I.bind("click.cluetip",function(e){return T.locateObject?(I.attrProp("title",""),void Q(e)):(r.is(":hidden")||!I.is(".cluetip-clicked")?(Q(e),t(".cluetip-clicked").removeClass("cluetip-clicked"),I.addClass("cluetip-clicked")):G(e),!1)});else if("focus"==T.activation)I.bind("focus.cluetip",function(t){I.attrProp("title",""),Q(t)}),I.bind("blur.cluetip",function(t){I.attrProp("title",I.data("cluetip").title),G(t)});else{I[T.clickThrough?"unbind":"bind"]("click.cluetip",m);var K=function(t){if(T.tracking){var e=Y-t.pageX;e=e>0?30:-r.width()-20;var i=-10;I.bind("mousemove.cluetip",function(t){r.css({left:t.pageX+e}),"bottomTop"!=T.positionBy&&r.css({top:t.pageY+i})})}};t.fn.hoverIntent&&T.hoverIntent?I.hoverIntent({sensitivity:T.hoverIntent.sensitivity,interval:T.hoverIntent.interval,over:function(t){Q(t),K(t)},timeout:T.hoverIntent.timeout,out:function(t){G(t),I.unbind("mousemove.cluetip")}}):I.bind("mouseenter.cluetip",function(t){T.sticky&&(clearTimeout(j),clearTimeout(C)),Q(t),K(t)}).bind("mouseleave.cluetip",function(t){T.sticky?(clearTimeout(j),j=setTimeout(function(){G(t),I.unbind("mousemove.cluetip")},500)):(G(t),I.unbind("mousemove.cluetip"))}),I.bind("mouseover.cluetip",function(t){I.attrProp("title","")}).bind("mouseleave.cluetip",function(t){I.attrProp("title",I.data("cluetip").title)}).bind("click.cluetip",function(){J()})}}),this},function(){t.support=t.support||{};for(var e=document.createElement("div"),i=e.style,o=["boxShadow"],l=["moz","Moz","webkit","o"],a=0,n=o.length;n>a;a++){var s=o[a],c=s.charAt(0).toUpperCase()+s.slice(1);if("undefined"!=typeof i[s])t.support[s]=s;else for(var r=0,p=l.length;p>r;r++)if("undefined"!=typeof i[l[r]+c]){t.support[s]=l[r]+c;break}}e=null}(),t.fn.cluetip.defaults=t.cluetip.defaults}(jQuery);