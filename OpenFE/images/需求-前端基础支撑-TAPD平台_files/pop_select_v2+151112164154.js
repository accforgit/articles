function drop_menu(e){return $(e).attr("with_workflow")?!1:void(void 0==$(e).attr("pop_select_simple")?deal_pop_select(e):deal_pop_select_simple(e))}function deal_pop_select_simple(e){var t=$(e).attr("pop_select_simple"),i=$(e).attr("id"),a=$(e).position(),o=$(document.getElementById(i+"_g_menu"));o.size()<1&&(o=$("#"+t+"_g_menu").clone(),o.attr("id",i+"_g_menu"),$(e).after(o));for(var n=$(e).attr("pop_workitem_id"),r=$("a",o),s=r.length,c=0;s>c;c++){var l=$(r[c]).attr("url");l=l.replace("#",n),$(r[c]).attr("url",l),$(r[c]).removeAttr("onclick"),$(r[c]).unbind("click"),$(r[c]).bind("click",function(){change(this,i),o.hide()})}return enableHebe&&"task_status"==t?deal_pop_select(e):(o.css("top",a.top+14),o.css("left",a.left),o.show(),o.parent().hover(function(){},function(){o.hide()})),$(e).removeAttr("pop_select_simple"),!1}function deal_pop_select(e){var t=$(e).attr("id"),i=$(e).offset(),a=5,o=$(document.getElementById(t+"_g_menu"));if(enableHebe){$(".J-task-out").remove();var n=i.top+$(e).height()+a,r=$(o).clone().addClass("J-task-out").css({left:i.left,top:n,opacity:0,"z-index":1e3}).show().appendTo("body");n=n+$(o).height()>window.innerHeight?i.top-r.height()-$(e).height():n,r.css({top:n,opacity:1}).mouseleave(function(){this.remove()}).find("a").each(function(){var i=$(e).attr("pop_workitem_id"),a=$(this).attr("url");a=a.replace("#",i),$(this).attr("url",a),$(this).bind("click",function(){change(this,t),r.hide()})})}else $(o).show();return!1}function change(e,t){if(window.mychange)return void mychange(e,t);var i=new Date,a=$(e).attr("url")+"&t="+i.getTime(),o=!0;if(o){var n=$(e).attr("is_asy");if(1==n||"1"==n){var r=$("#"+t),s=$(e).text(),c='<i class="arr"></i>';r.html(" "+s+" "+c),r.attr("title",s),"High"==s||"é«˜"==s?r.addClass("high_priority"):r.removeClass("high_priority"),$.get(a,function(i){if("1"==i||1==i){if(TFL.tips.showFlash(success_flash_msg),previewObject){var o={entityid:$(e).attr("pop_workitem_id"),entitytype:"task",workspaceid:$(e).attr("workspace_id")};previewObject.init(o)}"function"==typeof parent_change&&parent_change(e,t,a)}else TFL.tips.showFlash(failed_flash_msg)})}}(0==n||"0"==n)&&(window.location.href=a)}function construct_row_operator_data(e,t,i,a,o,n,r){var s={};if(s.RowChange={},s.RowChange.entity_type=e,s.RowChange.entity_id=t,s.RowChange.afterchange=i,s.RowChange.beforechange=a,s.RowChange.fields=o,s.RowChange.action_timestamp=n,r)s.RowChange.url_params=r;else{var c=window.location.href,l=parseQuery(c);s.RowChange.url_params=l}return s}$(document).on("click",function(){$(".J-task-out").remove()});