var tapd_dsc={cookie_key:"dsc-token",http_header_key:"DSC-TOKEN",form_key:"dsc_token",gen_token_and_set_to_cookie:function(){var e=this.generate_dsc_token();return this.cookie(this.cookie_key,e,{expires:7,path:"/"}),e},add_dsc_to_form:function(e){var t=this.gen_token_and_set_to_cookie(),n=document.createElement("input");n.setAttribute("type","hidden"),n.setAttribute("name",this.form_key),n.setAttribute("value",t),document.getElementById(e).appendChild(n)},generate_dsc_token:function(e){e=e||16;for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;e>o;o++)t+=n.charAt(Math.floor(Math.random()*n.length));return t},cookie:function(e,t,n){if("undefined"==typeof t){var o=null;if(document.cookie&&""!=document.cookie)for(var r=document.cookie.split(";"),i=0;i<r.length;i++){var a=jQuery.trim(r[i]);if(a.substring(0,e.length+1)==e+"="){o=decodeURIComponent(a.substring(e.length+1));break}}return o}n=n||{},null===t&&(t="",n.expires=-1);var d="";if(n.expires&&("number"==typeof n.expires||n.expires.toUTCString)){var s;"number"==typeof n.expires?(s=new Date,s.setTime(s.getTime()+24*n.expires*60*60*1e3)):s=n.expires,d="; expires="+s.toUTCString()}var u=n.path?"; path="+n.path:"",c=n.domain?"; domain="+n.domain:"",_=n.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),d,u,c,_].join("")}};"undefined"!=typeof jQuery&&jQuery(function(){jQuery(document).delegate("form","submit",function(e){var t=tapd_dsc.gen_token_and_set_to_cookie(),n=jQuery("<input>").attr("type","hidden").attr("name",tapd_dsc.form_key).val(t);return jQuery(e.target).append(jQuery(n)),!0}),jQuery.ajaxPrefilter(function(e,t,n){if("post"===e.type.toLowerCase()){var o=tapd_dsc.gen_token_and_set_to_cookie();n.setRequestHeader(tapd_dsc.http_header_key,o)}})});